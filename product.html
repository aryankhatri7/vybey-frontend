<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Product | VYBEY</title>
<script src="config.js"></script>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="products.css">

</head>
<body>

<!-- NAVBAR -->
<nav class="navbar">
  <div class="logo">
    <a href="index.html">VYBEY</a>
  </div>

  <ul class="nav-links">
    <li><a href="index.html">Home</a></li>
    <li><a href="products.html">Shop</a></li>
  </ul>

  <div class="cart-icon">
    <a href="cart.html" class="bag-only">üëú</a>
  </div>
</nav>

<!-- PRODUCT PAGE -->
<section class="container product-page">

  <!-- BACK -->
  <div class="product-back" onclick="goBack()">‚Üê Back to Shop</div>

  <div class="row align-items-center" id="productDetails"></div>

</section>

<script>
let selectedProduct = null;
let quantity = 1;

document.addEventListener("DOMContentLoaded", () => {

  selectedProduct = JSON.parse(localStorage.getItem("selectedProduct"));
  if (!selectedProduct) {
    window.location.href = "products.html";
    return;
  }

  renderProduct();
});

function renderProduct() {
  document.getElementById("productDetails").innerHTML = `
    <div class="col-lg-6 mb-5">
      <div class="product-image-wrap">
        <img src="https://vybey-backened.onrender.com/${selectedProduct.image}">
>
      </div>
    </div>

    <div class="col-lg-6">
      <span class="product-tag">VYBEY ACCESSORY</span>

      <h1 class="product-title">${selectedProduct.name}</h1>

      <h3 class="product-price">‚Çπ${selectedProduct.price}</h3>

      <p class="product-desc">
        Premium Gen-Z accessories designed with minimal form,
        confident details and everyday comfort.
      </p>

      <!-- QUANTITY -->
      <div class="qty-wrap">
        <button onclick="changeQty(-1)">‚àí</button>
        <span id="qty">${quantity}</span>
        <button onclick="changeQty(1)">+</button>
      </div>

      <!-- CTA -->
      <button class="add-to-cart-btn" onclick="addToCart()">
        Add to Cart ‚Üí
      </button>
    </div>
  `;
}

function changeQty(val) {
  quantity += val;
  if (quantity < 1) quantity = 1;
  document.getElementById("qty").innerText = quantity;
}

function addToCart() {
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  let existing = cart.find(p => p._id === selectedProduct._id);

  if (existing) {
    existing.quantity += quantity;
  } else {
    cart.push({
      _id: selectedProduct._id,
      name: selectedProduct.name,
      price: selectedProduct.price,
      image: selectedProduct.image,
      quantity: quantity
    });
  }

  localStorage.setItem("cart", JSON.stringify(cart));
  alert("Added to cart üëú");
}


  localStorage.setItem("cart", JSON.stringify(cart));
  alert("Added to cart üëú");


function goBack() {
  window.location.href = "products.html";
}
</script>

</body>
</html>
